<div class="inner-page-padding">
    <h2 style="font-size:0.9rem;font-weight: 600;">{{header()}}</h2>
    <app-breadcrumb></app-breadcrumb>
    <mat-card fxLayout="column" fxFlexFill>
        <mat-card-header>
        </mat-card-header>
        <mat-card-content>
            <form class="wms-search" #myForm="ngForm" [formGroup]="searchFormGroup">
                <div class="row">
                    <!--Row 1 Column 1-->
                    <div class="col-lg-6 col-md-6 col-sm-6" style="margin-top: 0.5rem;">
                        <div class="col-lg-1 col-md-1 col-sm-1" style="float: left;"> &nbsp; </div>
                        <div class="contol-label col-lg-3 col-md-3 col-sm-3" style="float: left;">
                            <label class="input-label">Document Type</label>
                        </div>
                        <div class=" col-lg-4 col-md-4 col-sm-4" style="float: left">
                            <label class="value-label">{{docType}}</label>
                        </div>
                    </div>

                    <!--Row 1 Column 2-->
                    <div class="col-lg-6 col-md-6 col-sm-6" style="margin-top: 0.5rem;">
                        <div class=" col-lg-4 col-md-4 col-sm-4" style="float: left;"> &nbsp; </div>
                        <div class="contol-label col-lg-3 col-md-3 col-sm-3" style="float: left;">
                            <label class="input-label asterisk-if-mandatory">Status</label>
                        </div>
                        <div class=" col-lg-4 col-md-4 col-sm-4" style="float: left">
                            <ng-select [items]="statusList" class="select-control" role="listbox" bindLabel="descr"
                                bindValue="lookupVal" [clearable]="false" name="statusValue" placeholder="STATUS"
                                formControlName="statusFc">
                            </ng-select>
                        </div>
                    </div>

                    <!-- Row 2 Column 1-->
                    <div class="col-lg-6 col-md-6 col-sm-6" style="margin-top: 0.5rem;">
                        <div class="col-lg-1 col-md-1 col-sm-1" style="float: left;"> &nbsp; </div>
                        <div class="contol-label col-lg-3 col-md-3 col-sm-3" style="float: left;">
                            <label class="asterisk-if-mandatory input-label">Document Number</label>
                        </div>
                        <div class=" col-lg-4 col-md-4 col-sm-4 " style="float: left">
                            <input hideRequiredMarker="true" class="form-control input-md1" name="documentNum" matInput
                                placeholder="DOCUMENT NUMBER" formControlName="documentNumFc">
                        </div>
                    </div>
                    <!--Row 2 Column 2-->
                    <div class="col-lg-6 col-md-6 col-sm-6" style="margin-top: 0.5rem;">
                        <div class=" col-lg-4 col-md-4 col-sm-4" style="float: left;"> &nbsp; </div>
                        <div class="contol-label col-lg-3 col-md-3 col-sm-3" style="float: left;">
                            <label class="asterisk-if-mandatory input-label">Buyer GSTIN</label>
                        </div>
                        <div class=" col-lg-4 col-md-4 col-sm-4" style="float: left">
                            <input hideRequiredMarker="true" class="form-control input-md1" name="buyerGstin" matInput
                                placeholder="BUYER GSTIN" formControlName="BuyerGSTINFc">
                        </div>
                    </div>

                    <!--Row 3 Column 1-->
                    <div class="col-lg-6 col-md-6 col-sm-6" style="margin-top: 0.5rem;">
                        <div class="col-lg-1 col-md-1 col-sm-1" style="float: left;"> &nbsp; </div>
                        <div class="contol-label col-lg-3 col-md-3 col-sm-3" style="float: left;">
                            <label class="input-label asterisk-if-mandatory">From Date</label>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4" style="float: left">
                            <mat-form-field appearance="outline" class="no-padding">
                                <input matInput class="date-form-control" [matDatepicker]="picker11"
                                    placeholder="DD-MMM-YYYY" formControlName="fromDtFc" [max]="searchValues.toDate"
                                    [(ngModel)]="searchValues.fromDate">
                                <mat-datepicker-toggle matPrefix [for]="picker11"></mat-datepicker-toggle>
                                <mat-datepicker style="margin-bottom: 5px;" panelClass="safexDatePicker" #picker11></mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>


                    <!--Row 3 Column 2-->
                    <div class="col-lg-6 col-md-6 col-sm-6" style="margin-top: 0.5rem;">
                        <div class=" col-lg-4 col-md-4 col-sm-4" style="float: left;"> &nbsp; </div>
                        <div class="contol-label col-lg-3 col-md-3 col-sm-3" style="float: left;">
                            <label class="input-label asterisk-if-mandatory">To Date</label>
                        </div>
                        <div class=" col-lg-4 col-md-4 col-sm-4" style="float: left">
                            <mat-form-field appearance="outline" class="no-padding">
                                <input matInput formControlName="toDtFc" class="date-form-control"
                                    [matDatepicker]="picker111" placeholder="DD-MMM-YYYY"
                                    [(ngModel)]="searchValues.toDate" [max]="maxDate" [min]="searchValues.fromDate">
                                <mat-datepicker-toggle matPrefix [for]="picker111"></mat-datepicker-toggle>
                                <mat-datepicker panelClass="safexDatePicker" #picker111></mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>

                    <!-- Row 4 Column 1-->
                    <div class="col-lg-6 col-md-6 col-sm-6" *ngIf = "checkIfCredit">
                        <div class="col-lg-1 col-md-1 col-sm-1" style="float: left;"> &nbsp; </div>
                        <div class="contol-label col-lg-3 col-md-3 col-sm-3" style="float: left;">
                            <label class="asterisk-if-mandatory input-label">Batch Number</label>
                        </div>
                        <div class=" col-lg-4 col-md-4 col-sm-4 " style="float: left">
                            <input hideRequiredMarker="true" class="form-control input-md1" name="batchNum" matInput
                                placeholder="BATCH NUMBER" formControlName="batchNumFc">
                        </div>
                    </div>
                </div>
             
                <div class="col-md-12" style="text-align: end;" *ngIf = "checkIfRetail"> 
                    <a><label class="text-label" (click)="downloadTemplate()"><b>Download
                                Template</b></label></a>
                </div>
                <div class="row" *ngIf ="checkIfRetail">
                    <div class="col-lg-6 col-md-6 col-sm-6" style="margin-top: 0.5rem;">
                        <div class=" col-lg-1 col-md-1 col-sm-1" style="float: left;"> &nbsp; </div>
                        <div class="contol-label col-lg-3 col-md-3 col-sm-3" style="float: left;">
                            <label class="asterisk-if-mandatory input-label">Upload File</label>
                        </div>
                        <div class=" col-lg-4 col-md-4 col-sm-4" style="float: left">
                            <input #fileInput type="file" 
                                (click)="fileInput.value=null" (change)="uploadedFile($event.target.files)"
                                placeholder="Upload file" accept=".xlsx">
                        </div>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-12 text-center footer-button-padding">
                        <button mat-raised-button color="primary" *ngIf = "checkIfRetail" (click)="uploadExcel()" [disabled]="ifExcelUploaded">Validate and Show</button>
                        <button mat-raised-button color="primary" style="margin-left:0.3rem" [disabled]="!myForm.form.valid"
                            (click)="search()">Search</button>
                        <button mat-raised-button style="margin-left:0.3rem" (click)="clear()">Reset</button>
                    </div>
                </div>
                
            </form>
        </mat-card-content>

        <!-- to call table component -->
        <app-einvoice-table-result *ngIf="showResult" [searchValues]="searchValues"  [uploadData]="uploadData" [documentType]="docType" [uploadErrors] = "uploadErrors"
            (emitterClearSearchParams)="resetComponent($event)"></app-einvoice-table-result>

    </mat-card>
</div>